(window.webpackJsonpforecast=window.webpackJsonpforecast||[]).push([[0],{100:function(t,e,a){"use strict";a.r(e);var n=a(7),i=a.n(n),r=a(57),s=a.n(r),o=a(46),c=a.n(o),u=a(58),l=a(49),d=a(40),m=a(41),h=a(45),p=a(42),b=a(32),f=a(44),y=a(59),v=a.n(y),g=a(60),w=a.n(g),E=a(61),j=a.n(E),x=a(62),C=a.n(x),O=a(63),k=a.n(O),S=a(64),M=a.n(S),N=a(65),D=a.n(N),F=a(66),P=a.n(F),A=a(67),T=a.n(A),I=a(68),z=a.n(I),R=a(69),B=a.n(R),V=a(70),_=a.n(V),H=a(71),L=a.n(H),W=a(72),U=a.n(W);a(97);var q=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0===t.toDataURL("image/webp").indexOf("data:image/webp")}(),J={Rain:v.a,Snow:j.a,Clouds:k.a,Clear:D.a,Thunderstorm:T.a,Drizzle:B.a,Rainjpg:w.a,Snowjpg:C.a,Cloudsjpg:M.a,Clearjpg:P.a,Thunderstormjpg:z.a,Drizzlejpg:_.a};var G=function(t){return J[t]?q?J[t]:J[t+"jpg"]:q?L.a:U.a};var K=function(t){return i.a.createElement("div",{className:"weatherCard",style:{backgroundImage:"url("+G(t.condition)+")"}},i.a.createElement("h2",{className:"mainh2"},t.day),i.a.createElement("h2",{className:"mainh2"},t.condition),i.a.createElement("h2",{className:"highh2"},"High: "+t.high+"\xb0C"),i.a.createElement("h2",{className:"lowh2"},"Low: "+t.low+"\xb0C"))};var X=function(t){var e={backgroundColor:"mediumaquamarine",backgroundImage:"url("+G(t.mainCondition)+")",backgroundSize:"cover",backgroundPosition:"center"},a=["12 AM","3 AM","6 AM","9 AM","12 PM","3 PM","6 PM","9 PM"],n=["Time","Temperature","Condition","Description","Humidity","Cloudiness","Wind Speed"],r=n.map(function(t,e){return i.a.createElement("th",{key:e},t)}),s=[0,1,2,3,4,5,6,7].map(function(e){return i.a.createElement("tr",{key:e},i.a.createElement("td",null,a[e]),i.a.createElement("td",null,t.values[t.start+e]),i.a.createElement("td",null,t.conditions[t.start+e]),i.a.createElement("td",null,t.descriptions[t.start+e]),i.a.createElement("td",null,t.humidities[t.start+e]),i.a.createElement("td",null,t.cloudiness[t.start+e]),i.a.createElement("td",null,t.windSpeeds[t.start+e]))});return i.a.createElement("table",{align:"center",style:e},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",{colSpan:n.length},t.day)),i.a.createElement("tr",null,r),s))},Z=(a(98),a(76)),Q=a(73),Y=a(55),$=a(75),tt=a(74),et=a(6),at=43.59,nt=-79.7,it=8,rt=at,st=nt,ot=function(t){function e(){var t;return Object(d.a)(this,e),(t=Object(h.a)(this,Object(p.a)(e).call(this))).state={lat:rt,lon:st},t.map=new Q.a({target:null,layers:[new $.a({source:new tt.a})],view:new Y.a({center:Object(et.d)([nt,at]),zoom:[it]})}),t.handleSubmit=t.handleSubmit.bind(Object(b.a)(t)),t}return Object(f.a)(e,t),Object(m.a)(e,[{key:"handleSubmit",value:function(){this.props.submit(this.state.lat,this.state.lon)}},{key:"render",value:function(){return i.a.createElement("div",{id:"mapContainer"},i.a.createElement("label",null,"Or click on the map to see the forecast there")," ",i.a.createElement("br",null),i.a.createElement("label",null,"Latitude: ",this.state.lat," Longitude: ",this.state.lon),i.a.createElement("br",null),i.a.createElement("input",{type:"submit",value:"Submit Coordinates",onClick:this.handleSubmit}))}},{key:"componentDidMount",value:function(){var t=this;this.map.setTarget("mapContainer"),this.map.on("click",function(e){var a=Object(et.l)(e.coordinate);t.setState({lon:a[0],lat:a[1]})})}},{key:"componentWillUnmount",value:function(){var t=Object(et.l)(this.map.getView().getCenter()),e=Object(Z.a)(t,2);nt=e[0],at=e[1],it=this.map.getView().getZoom();var a=[this.state.lon,this.state.lat];st=a[0],rt=a[1]}}]),e}(n.Component),ct=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function ut(t){var e=t.city.name;return e?e+"'s Forecast":"Forecast of Unknown City"}function lt(t){for(var e=[],a=0;a<40;a+=8)e.push(ct[(new Date(t.list[a].dt_txt.slice(0,10)).getDay()+1)%7]);return e}function dt(t,e){for(var a=[],n=[],i=[1,1,2,3,3,3,2,1],r=0;r<5;r++){n={maxValue:0,maxCondition:"N/A"};for(var s=8*r;s<8*(r+1);s++){var o=t[s];"N/A"!==o&&(n[o]=n[o]+i[s%8]||i[s%8],n[o]>n.maxValue&&(n.maxValue=n[o],n.maxCondition=o))}a.push(n.maxCondition)}return a}function mt(t,e){for(var a=[],n=[],i=0;i<e.length-1;i++){for(var r=0,s=Number.MAX_SAFE_INTEGER,o=e[i],c=e[i+1],u=o;u<c;u++)r=Math.max(r,t[u].main.temp_max),s=Math.min(s,t[u].main.temp_min);n.push((r-273.15).toFixed(2)),a.push((s-273.15).toFixed(2))}return{highs:n,lows:a}}function ht(t){var e,a=[],n=(e=t[0],(24-new Date(e.dt_txt).getHours())/3);a.push(0);for(var i=n;i<=40;i+=8)a.push(i);return a}function pt(t,e){for(var a=e[1],n=[],i=[],r=[],s=[],o=[],c=[],u=0;u<8-a;u++)n.push("N/A"),i.push("N/A"),r.push("N/A"),s.push("N/A"),o.push("N/A"),c.push("N/A");for(var l=0;l<32+a;l++)n.push((t[l].main.temp-273.15).toFixed(2)+"\xb0C"),i.push(t[l].weather[0].main),r.push(t[l].weather[0].description),s.push(t[l].main.humidity+"%"),o.push(t[l].clouds.all+"%"),c.push(t[l].wind.speed+" m/s");return{temps:n,conds:i,descs:r,humids:s,clouds:o,windSpeeds:c}}function bt(){return(bt=Object(l.a)(c.a.mark(function t(e){var a,n,i,r,s,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if(429!==(a=t.sent).status){t.next=5;break}return t.abrupt("return",-1);case 5:return t.next=7,a.json();case 7:return n=t.sent,i=ht(n.list),(r={}).header=ut(n),r.days=lt(n),s=mt(n.list,i),o=pt(n.list,i),r.conditions=dt(o.conds),r.highs=s.highs,r.lows=s.lows,r.hourly=o.temps,r.hourlyConditions=o.conds,r.descriptions=o.descs,r.humidities=o.humids,r.cloudiness=o.clouds,r.windSpeeds=o.windSpeeds,t.abrupt("return",r);case 24:case"end":return t.stop()}},t)}))).apply(this,arguments)}var ft=function(t){return bt.apply(this,arguments)},yt=["toronto","brampton","mississauga","richmondhill","kitchener","waterloo","markham","ottawa","hamilton","vaughan","oshawa"],vt=["Toronto","Brampton","Mississauga","Richmond Hill","Kitchener","Waterloo","Markham","Ottawa","Hamilton","Vaughan","Oshawa"],gt=function(t){function e(t){var a;return Object(d.a)(this,e),(a=Object(h.a)(this,Object(p.a)(e).call(this))).state={city:"toronto",name:t.name},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a}return Object(f.a)(e,t),Object(m.a)(e,[{key:"handleChange",value:function(t){t.target.value!==this.state.city&&this.setState({city:t.target.value})}},{key:"render",value:function(){var t=yt.map(function(t,e){return i.a.createElement("option",{key:e,value:t},vt[e])});return i.a.createElement("select",{value:this.state.city,onChange:this.handleChange,name:this.state.name},t)}}]),e}(n.Component);function wt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function Et(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?wt(a,!0).forEach(function(e){Object(u.a)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):wt(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var jt="54a84a123d401ac68736a6bca89f4301",xt={toronto:"6167865",brampton:"5907364",mississauga:"6075357",richmondhill:"6122091",kitchener:"5992996",waterloo:"6176823",markham:"6066513",ottawa:"6094817",hamilton:"5969782",vaughan:"6173577",oshawa:"6094578"},Ct="https://api.openweathermap.org/data/2.5/forecast?id=6167865&appid="+jt;function Ot(t){return t!==Ct&&(Ct=t,!0)}var kt=function(t){function e(t){var a;return Object(d.a)(this,e),(a=Object(h.a)(this,Object(p.a)(e).call(this,t))).state={days:0,highs:0,lows:0,conditions:0,header:"Toronto's Forecast",status:200,hourly:[],hourlyConditions:[],descriptions:[],humidities:[],cloudiness:[],windSpeeds:[],dayIndex:-1},a.handleMapSubmit=a.handleMapSubmit.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a.dayFocus=a.dayFocus.bind(Object(b.a)(a)),a}return Object(f.a)(e,t),Object(m.a)(e,[{key:"handleMapSubmit",value:function(t,e){(function(t,e){return Ot("https://api.openweathermap.org/data/2.5/forecast?lat="+t+"&lon="+e+"&appid="+jt)})(t,e)&&this.componentDidMount()}},{key:"handleSubmit",value:function(t){var e;t.preventDefault(),e=t.target.elements.box.value,Ot("https://api.openweathermap.org/data/2.5/forecast?id="+xt[e]+"&appid="+jt)&&this.componentDidMount()}},{key:"dayFocus",value:function(t){this.setState({dayIndex:t})}},{key:"render",value:function(){var t=this;if(0===this.state.days)return i.a.createElement("h1",null,"The Forecast is loading, please wait");if(429===this.state.status)return i.a.createElement("h1",null,"Too many forecast requests have been made. Please come back in an hour.");if(-1!==this.state.dayIndex)return i.a.createElement("div",{style:{width:"fit-content",margin:"auto"}},i.a.createElement(X,{day:this.state.days[this.state.dayIndex],values:this.state.hourly,start:8*this.state.dayIndex,conditions:this.state.hourlyConditions,descriptions:this.state.descriptions,humidities:this.state.humidities,cloudiness:this.state.cloudiness,windSpeeds:this.state.windSpeeds,mainCondition:this.state.conditions[this.state.dayIndex]}),i.a.createElement("button",{id:"prevbtn",className:"cardButton",onClick:function(){return t.dayFocus((t.state.dayIndex+4)%5)}},"Previous"),i.a.createElement("button",{id:"backbtn",className:"cardButton",onClick:function(){return t.dayFocus(-1)}},"Back"),i.a.createElement("button",{id:"nextbtn",className:"cardButton",onClick:function(){return t.dayFocus((t.state.dayIndex+1)%5)}},"Next"));var e=[0,1,2,3,4].map(function(e){return i.a.createElement("div",{onClick:function(){return t.dayFocus(e)},className:"Card",key:e},i.a.createElement(K,{day:t.state.days[e],high:t.state.highs[e],low:t.state.lows[e],condition:t.state.conditions[e]}))});return i.a.createElement("div",null,i.a.createElement("h1",null,this.state.header),i.a.createElement("div",{id:"cardContainer"},e),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",null,"Choose a city to display its forecast ",i.a.createElement("br",null),i.a.createElement(gt,{name:"box"})),i.a.createElement("input",{type:"submit",value:"Submit"})),i.a.createElement(ot,{submit:this.handleMapSubmit}))}},{key:"componentDidMount",value:function(){var t=Object(l.a)(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ft(Ct);case 2:-1===(e=t.sent)?this.setState({status:429}):this.setState(Et({},e));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(i.a.Component);s.a.render(i.a.createElement(kt,null),document.getElementById("root"))},59:function(t,e,a){t.exports=a.p+"static/media/Rainy.9247b5c6.webp"},60:function(t,e,a){t.exports=a.p+"static/media/Rainy.869ecddf.jpg"},61:function(t,e,a){t.exports=a.p+"static/media/Snowy.c02d2d39.webp"},62:function(t,e,a){t.exports=a.p+"static/media/Snowy.753bb223.jpg"},63:function(t,e,a){t.exports=a.p+"static/media/Cloudy.d19659ab.webp"},64:function(t,e,a){t.exports=a.p+"static/media/Cloudy.7b0d2d01.jpg"},65:function(t,e,a){t.exports=a.p+"static/media/Clear.48100543.webp"},66:function(t,e,a){t.exports=a.p+"static/media/Clear.00892c85.jpg"},67:function(t,e,a){t.exports=a.p+"static/media/Thunderstorm.1cef7ab2.webp"},68:function(t,e,a){t.exports=a.p+"static/media/Thunderstorm.17776440.jpg"},69:function(t,e,a){t.exports=a.p+"static/media/Drizzle.73168f5d.webp"},70:function(t,e,a){t.exports=a.p+"static/media/Drizzle.90fc98b5.jpg"},71:function(t,e,a){t.exports=a.p+"static/media/Fog.61ac5181.webp"},72:function(t,e,a){t.exports=a.p+"static/media/Fog.e55044d6.jpg"},91:function(t,e,a){t.exports=a(100)},97:function(t,e,a){},98:function(t,e,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.4cb4e329.chunk.js.map